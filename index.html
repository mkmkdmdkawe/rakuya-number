<!DOCTYPE html>
<html lang="zh-Hant-TW">
  <head>
    <meta charset="utf-8" />
    <title>洛屋 叫號系統</title>
    <link rel="stylesheet" href="./style/style.css" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
  </head>

  <body>
    <div class="news-contents wrapper">
      <article>
        <img src="OX.png" />

        <h1 class="lang-title" data-en="Current Dine-in Number" data-jp="現在の呼び出し番号">
          內用當前號碼
        </h1>

        <h3 class="number">0</h3>

        <h2 class="lang-refresh" data-en="Refresh to get latest number" data-jp="最新番号を取得するには更新してください">
          獲取最新號碼,請重新整理
        </h2>

        <p class="notice-title" data-en="Notice:" data-jp="注意事項：">
          注意事項：
        </p>

        <ol>
          <li data-en="Estimated dining time about 15-25 minutes." data-jp="食事時間は約15-25分です。">
            依照洛屋經驗每個號碼吃飯時間約<font color="red">15-25</font>分鐘。
          </li>
          <li data-en="If skipped, inform staff onsite." data-jp="呼び出しを逃した場合はスタッフへ。">
            過號後，請回現場通知服務人員，虛延後1號。
          </li>
          <li data-en="Return when within 3 numbers." data-jp="番号が3番以内でお戻りください。">
            當前號碼與您手邊號碼相聚3個號碼內請回現長等候
          </li>
          <li data-en="Last order time 【14:30 / 20:30】" data-jp="ラストオーダー 【14:30 / 20:30】">
            ⬇️最後點餐時間【 早場14:30 / 晚場20:30 】
          </li>
          <li data-en="Please hand meal ticket to staff." data-jp="食券をスタッフへ渡してください。">
            餐卷記得交給服務人員
          </li>
        </ol>

        <ul>
          <li>
            <strong data-en="Weekends are busy, thank you for waiting." data-jp="週末は混雑します。ご協力ありがとうございます。">
              假日人數較多，感謝大家耐心等候。
            </strong>
          </li>
          <li>更多資訊：
            <FB><a href="https://reurl.cc/GGWq4D">FB</a></FB>
            <IG><a href="https://www.instagram.com/rakuya.ramen/">IG</a></IG>
          </li>
        </ul>
      </article>

      <footer>
        <button onclick="switchLanguage()">EN / CJT / JP</button>
      </footer>
    </div>

    <footer>
      <div class="wrapper">
        <a><small>&copy; 2026 Manabox</small></a>
      </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <script>
      // ===== Firebase 初始化 =====
      const firebaseConfig = {
        apiKey: "AIzaSyAoSHvK4Xn3TQ3s_qvkPBJlJou6kNJixaY",
        authDomain: "rakuya-number-system.firebaseapp.com",
        databaseURL: "https://rakuya-number-system-default-rtdb.firebaseio.com",
        projectId: "rakuya-number-system",
        storageBucket: "rakuya-number-system.firebasestorage.app",
        messagingSenderId: "641741870889",
        appId: "1:641741870889:web:3275f001c12bc68cbac938"
      };
      const app = firebase.initializeApp(firebaseConfig);
      const db = firebase.database();
      const numberRef = db.ref('currentNumber');

      // 顧客端實時監聽號碼
      numberRef.on('value', snapshot => {
        const val = snapshot.val();
        if (val !== null) document.querySelector('.number').textContent = val;
      });

      // 語言切換原本程式碼
      let currentLang = "zh";
      document.querySelectorAll('[data-en]').forEach(el => el.setAttribute('data-original', el.textContent));
      function switchLanguage() {
        const allElements = document.querySelectorAll('[data-en]');
        allElements.forEach(el => {
          if(currentLang === "zh") el.textContent = el.getAttribute('data-en');
          else if(currentLang === "en") el.textContent = el.getAttribute('data-jp');
          else el.textContent = el.getAttribute('data-original');
        });
        currentLang = currentLang === "zh" ? "en" : currentLang === "en" ? "jp" : "zh";
      }
    </script>
  </body>
</html>
